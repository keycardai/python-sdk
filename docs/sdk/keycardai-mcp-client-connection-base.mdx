---
title: base
sidebarTitle: base
---

# `keycardai.mcp.client.connection.base`



Base connection abstraction for MCP client.

Provides the Connection base class that all transport implementations extend.


## Classes

### `ConnectionError` <sup><a href="https://github.com/keycardai/python-sdk/blob/main/src/keycardai/mcp/client/connection/base.py#L10" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>


Raised when a connection cannot be established.


### `Connection` <sup><a href="https://github.com/keycardai/python-sdk/blob/main/src/keycardai/mcp/client/connection/base.py#L17" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>


Base class for MCP server connections.

Manages the lifecycle of a connection:
- start(): Begin connection (async, returns read/write streams)
- stop(): Terminate connection
- connect(): Implementation-specific connection logic (abstract)
- disconnect(): Implementation-specific cleanup (optional)


**Methods:**

#### `start` <sup><a href="https://github.com/keycardai/python-sdk/blob/main/src/keycardai/mcp/client/connection/base.py#L36" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
start(self) -> tuple[Any, Any]
```

Start the connection.

**Returns:**
- Tuple of (read_stream, write_stream)

**Raises:**
- `ConnectionError`: If connection fails to establish
- `Exception`: Any exception raised during connection establishment


#### `stop` <sup><a href="https://github.com/keycardai/python-sdk/blob/main/src/keycardai/mcp/client/connection/base.py#L62" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
stop(self) -> None
```

Stop the connection and clean up resources.


#### `connect_task` <sup><a href="https://github.com/keycardai/python-sdk/blob/main/src/keycardai/mcp/client/connection/base.py#L80" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
connect_task(self) -> None
```

Background task that manages connection lifecycle.

This task:
1. Calls connect() to establish connection
2. Signals ready when connection is established
3. Waits for stop signal
4. Calls disconnect() on cleanup


#### `connect` <sup><a href="https://github.com/keycardai/python-sdk/blob/main/src/keycardai/mcp/client/connection/base.py#L108" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
connect(self) -> tuple[Any, Any]
```

Establish the connection and return (read_stream, write_stream).
Must be implemented by subclasses.

**Returns:**
- Tuple of (read_stream, write_stream)

**Raises:**
- `NotImplementedError`: If not implemented by subclass


#### `disconnect` <sup><a href="https://github.com/keycardai/python-sdk/blob/main/src/keycardai/mcp/client/connection/base.py#L121" target="_blank"><Icon icon="github" style="width: 14px; height: 14px;" /></a></sup>

```python
disconnect(self) -> None
```

Clean up connection resources.
Optional - override in subclasses if cleanup is needed.

